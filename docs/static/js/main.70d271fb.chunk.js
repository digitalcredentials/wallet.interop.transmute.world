(this["webpackJsonpwallet-interop-transmute-world"]=this["webpackJsonpwallet-interop-transmute-world"]||[]).push([[0],{144:function(e,t){},167:function(e,t){},260:function(e,t){},265:function(e,t){},266:function(e,t){},270:function(e,t){},358:function(e,t){},487:function(e,t,a){e.exports=a.p+"static/media/logo.33b194d8.svg"},495:function(e,t,a){e.exports=a.p+"static/media/key.7d03fa36.svg"},496:function(e,t,a){e.exports=a.p+"static/media/transmute-loading-white.11fb6556.gif"},540:function(e,t,a){e.exports=a(781)},545:function(e,t,a){},573:function(e,t){},574:function(e,t){},590:function(e,t){},591:function(e,t){},595:function(e,t){},597:function(e,t){},627:function(e,t){},628:function(e,t){},781:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setKeystoreProp",(function(){return K}));var r={};a.r(r),a.d(r,"setTmuiProp",(function(){return J}));var o=a(0),i=a.n(o),l=a(23),c=a.n(l),s=(a(545),a(242)),u=a(184),p=a(76),m=a(469),d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var y=a(32),h=a(35),b=a(315),g=a(412),E=a(470),v=a.n(E),k=a(471),w=a(472),O=a(473),C=a.n(O),j=a(39),x=a(870),S=a(872),K=Object(S.a)("keystore/SET_TMUI_PROP",(function(e){return e})),T=Object(y.a)({},{apiRoot:"https://did-edv.web.app/edvs"}),P=Object(x.a)(Object(j.a)({},K,(function(e,t){var a=t.payload;return Object(y.a)({},e,{},a)})),T),D=a(120),W=Object(p.c)((function(e){return{keystore:e.keystore}}),Object(y.a)({},n)),N=a(7),I=a.n(N),R=a(12),L=a(183),F=a(475),B=a.n(F),A=a(188),M=a.n(A),U=B.a.driver().keyToDidDoc,H=Object(D.b)({doImportKeystore:function(e){var t=e.setKeystoreProp;return(function(){var e=Object(R.a)(I.a.mark((function e(a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({keystore:{data:a}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},doCreateWalletKeystore:function(e){var t=e.setKeystoreProp;return(Object(R.a)(I.a.mark((function e(){var a,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Ed25519KeyPair.generate();case 2:a=e.sent,n=U(a),r=M.a.create({keys:[{type:"assymetric",encoding:"base58",didPublicKeyEncoding:"publicKeyBase58",publicKey:a.publicKeyBase58,privateKey:a.privateKeyBase58,tags:["Ed25519VerificationKey2018",n.publicKey[0].id,"web"],notes:""}]}),t({keystore:{data:{keys:r.keys}}});case 6:case"end":return e.stop()}}),e)}))))},doUpdateKeystore:function(e){var t=e.setKeystoreProp;return(function(){var e=Object(R.a)(I.a.mark((function e(a){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=M.a.create({keys:Object.values(JSON.parse(a))}),t({keystore:{data:{keys:n.keys}}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},doDeleteKeystore:function(e){var t=e.setKeystoreProp;return(Object(R.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({keystore:null});case 1:case"end":return e.stop()}}),e)}))))},doToggleKeystore:function(e){var t=e.keystore,a=e.setKeystoreProp;return(function(){var e=Object(R.a)(I.a.mark((function e(n){var r,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({loading:!0});try{"string"===typeof t.keystore.data?((o=M.a.create(t.keystore.data)).unlock(n),a({keystore:{data:{keys:o.keys}}}),r="Unlocked keystore."):((i=M.a.create({keys:Object.values(t.keystore.data.keys)})).lock(n),a({keystore:{data:i.ciphered}}),r="Locked keystore."),console.log(r)}catch(l){console.error(l)}a({loading:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),z={reducer:P,container:Object(D.a)(W,H)},J=Object(S.a)("tmui/SET_TMUI_PROP",(function(e){return e})),V=Object(x.a)(Object(j.a)({},J,(function(e,t){var a=t.payload;return Object(y.a)({},e,{},a)})),{isPrimaryDrawerOpen:!1,isSpeedDialogOpen:!1,activeTabIndex:0,currentRole:{label:"Tier 0",value:"tier0"}}),q=Object(p.c)((function(e){return{tmui:e.tmui}}),Object(y.a)({},r)),Y=Object(D.b)({setTmuiProp:function(e){var t=e.setTmuiProp;return function(e){t(e)}},doToggleSpeedDial:function(e){var t=e.setTmuiProp;return function(e){t({isSpeedDialogOpen:e})}},doSelectActiveTab:function(e){var t=e.setTmuiProp;return function(e){t({activeTabIndex:e})}},doFabClick:function(e){var t=e.setTmuiProp;return function(e){t({fabClick:e})}}}),_={reducer:V,container:Object(D.a)(q,Y)},G=a(106),$=Object(G.a)(),Q={router:Object(u.b)($),keystore:z.reducer,tmui:_.reducer},X=a(64),Z=a(501),ee=a(503),te=a(15),ae=a(18),ne=a(47),re=a(38),oe=a(48),ie=a(502),le=a(686),ce=a(117),se='"Rajdhani"',ue='"Roboto Condensed"',pe='"Lato"',me=function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props.children,t=Object(ie.a)({splashImage:"",palette:{type:"light",primary:{light:Object(ce.lighten)("#594aa8",.07),main:"#594aa8",dark:Object(ce.darken)("#594aa8",.07)},secondary:{light:Object(ce.lighten)("#fcb373",.07),main:"#fcb373",dark:Object(ce.darken)("#fcb373",.07)}},typography:{useNextVariants:!0,fontSize:16,fontFamily:[se,ue,pe].join(","),h1:{fontFamily:se,fontWeight:600},h2:{fontFamily:se,fontWeight:600},h3:{fontFamily:se,fontWeight:600},h4:{fontFamily:ue,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},h5:{fontFamily:ue,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},h6:{fontFamily:ue,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},subtitle1:{fontFamily:se,fontWeight:400},subtitle2:{fontFamily:ue,fontWeight:400},body1:{fontFamily:pe,fontWeight:400},body2:{fontFamily:pe,fontWeight:400},button:{fontFamily:ue,fontWeight:400},caption:{fontFamily:ue,fontWeight:400},overline:{fontFamily:ue,letterSpacing:"0.15em",textTransform:"uppercase",fontWeight:300}},overrides:{MuiInput:{input:{fontFamily:pe}},MuiInputLabel:{root:{fontFamily:ue}},MuiAppBar:{root:{}},MuiButton:{contained:{boxShadow:"none"}}}});return i.a.createElement(le.a,{theme:t},e)}}]),t}(o.Component),de=a(840),fe=a(504),ye=a(2),he=a(478),be=a.n(he),ge=a(482),Ee=a.n(ge),ve=a(311),ke=a.n(ve),we=a(484),Oe=a.n(we),Ce=a(414),je=a(415),xe=a(221),Se=a(783),Ke=a(481),Te=a.n(Ke),Pe=a(483),De={success:be.a,warning:Te.a,error:Ee.a,info:ke.a,default:ke.a},We=Object(Pe.a)((function(e){return{success:{backgroundColor:Ce.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:je.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));var Ne=function(e){var t=We(),a=e.className,n=e.message,r=e.onClose,o=e.variant,l=Object(fe.a)(e,["className","message","onClose","variant"]),c=De[o];return i.a.createElement(Se.a,Object.assign({className:Object(ye.a)(t[o],a),"aria-describedby":"client-snackbar",message:i.a.createElement("span",{id:"client-snackbar",className:t.message},i.a.createElement(c,{className:Object(ye.a)(t.icon,t.iconVariant)}),n),action:[i.a.createElement(xe.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},i.a.createElement(Oe.a,{className:t.icon}))]},l))};var Ie=function(e){var t=e.tmui.snackBarMessage||{variant:"default",vertical:"bottom",horizontal:"right"},a=t.open,n=t.variant,r=t.message,o=t.autoHideDuration,l=t.vertical,c=t.horizontal,s=function(t,a){"clickaway"!==a&&e.setTmuiProp({snackBarMessage:Object(y.a)({},e.tmui.snackBarMessage,{open:!1})})};return i.a.createElement("div",null,i.a.createElement(de.a,{anchorOrigin:{vertical:l,horizontal:c},open:a,autoHideDuration:o,onClose:s},i.a.createElement(Ne,{onClose:s,variant:n,message:r})))},Re=a(843),Le=a(842),Fe=a(86),Be=a(464),Ae=a(485),Me=a.n(Ae),Ue=a(417),He=a(65),ze=a(25),Je=a(841),Ve=a(416),qe=a(214),Ye=a(486),_e=a.n(Ye),Ge=a(223),$e=a.n(Ge),Qe=Object(Pe.a)((function(e){var t;return{root:{},grow:{flexGrow:1},drawer:Object(j.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(j.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(j.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},sectionDesktop:Object(j.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(j.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),content:(t={},Object(j.a)(t,e.breakpoints.up("sm"),{marginLeft:240}),Object(j.a)(t,"flexGrow",1),Object(j.a)(t,"padding",e.spacing(3)),t)}}));var Xe=function(e){var t=e.container,a=Qe(),n=Object(ze.a)(),r=i.a.useState(!1),o=Object(X.a)(r,2),l=o[0],c=o[1],s=i.a.useState(null),u=Object(X.a)(s,2),p=u[0],m=u[1],d=i.a.useState(null),f=Object(X.a)(d,2),y=f[0],h=f[1],b=Boolean(p),g=Boolean(y),E=function(){c(!l)},v=function(){h(null)},k=i.a.createElement(qe.a,{anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:function(){m(null),v()}},e.rightHandAccountMenu.map((function(e){return e.displaySmUp?"":i.a.createElement(Ve.a,{key:e.label,onClick:e.onClick},e.label)}))),w=i.a.createElement(qe.a,{anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:v},e.rightHandAccountMenu.map((function(e){return i.a.createElement(Ve.a,{key:e.label,onClick:e.onClick},i.a.createElement(xe.a,{"aria-label":e.ariaLabel,color:"inherit"},i.a.createElement(Je.a,{badgeContent:e.badgeContent,color:"secondary"},e.icon)),i.a.createElement("p",null,e.label))})));return i.a.createElement("div",{className:a.root},i.a.createElement(Le.a,null),i.a.createElement(Re.a,{position:"fixed",className:a.appBar},i.a.createElement(Ue.a,null,i.a.createElement(xe.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:E,className:a.menuButton},i.a.createElement(Me.a,null)),e.headerImage?i.a.createElement("img",{src:e.headerImage,alt:e.headerText,className:a.title,style:{height:"28px"}}):i.a.createElement(He.a,{className:a.title,variant:"h6",noWrap:!0},e.headerText),i.a.createElement("div",{className:a.grow}),i.a.createElement("div",{className:a.sectionDesktop},e.rightHandAccountMenu.map((function(e){return e.displaySmUp?i.a.createElement(xe.a,{key:e.ariaLabel,"aria-label":e.ariaLabel,color:"inherit"},i.a.createElement(Je.a,{color:"secondary",badgeContent:e.badgeContent},e.icon)):""})),i.a.createElement(xe.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},i.a.createElement(_e.a,null))),i.a.createElement("div",{className:a.sectionMobile},i.a.createElement(xe.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},color:"inherit"},i.a.createElement($e.a,null))))),w,k,i.a.createElement("nav",{className:a.drawer,"aria-label":"drawer menu"},i.a.createElement(Be.a,{smUp:!0,implementation:"css"},i.a.createElement(Fe.a,{container:t,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:l,onClose:E,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},e.drawer)),i.a.createElement(Be.a,{xsDown:!0,implementation:"css"},i.a.createElement(Fe.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},e.drawer))),i.a.createElement("main",{className:a.content},i.a.createElement("div",{className:a.toolbar}),i.a.createElement("div",{style:{maxWidth:"100%"}},e.content)))},Ze=a(789),et=a(845),tt=a(418),at=a(788),nt=a(226),rt=a.n(nt),ot=a(224),it=a.n(ot),lt=a(225),ct=a.n(lt),st=[{label:"Home",icon:i.a.createElement(it.a,null),showForRoles:["tier0","tier1","tier2"],onClick:function(){$.push("/")}},{label:"Keystore",icon:i.a.createElement(ct.a,null),showForRoles:["tier0","tier1","tier2"],onClick:function(){$.push("/keystore")}},{label:"Source Code",icon:i.a.createElement(rt.a,null),showForRoles:["tier0","tier1","tier2"],onClick:function(){window.open("https://github.com/transmute-industries/wallet.interop.transmute.world","_blank")}}];var ut=function(e){var t=e.tmui,a=(e.setTmuiProp,i.a.useState({currentRole:t.currentRole})),n=Object(X.a)(a,1)[0];return i.a.createElement(i.a.Fragment,null,i.a.createElement(at.a,null,st.filter((function(e){return-1!==e.showForRoles.indexOf(n.currentRole.value)})).map((function(e){return i.a.createElement(Ze.a,{button:!0,key:e.label,onClick:e.onClick},i.a.createElement(et.a,null,e.icon),i.a.createElement(tt.a,{primary:e.label}))}))))},pt=[{badgeContent:0,ariaLabel:"home",icon:i.a.createElement(it.a,null),label:"Home",onClick:function(){$.push("/")}},{badgeContent:0,ariaLabel:"keystore",icon:i.a.createElement(ct.a,null),label:"Keystore",onClick:function(){$.push("/keystore")}},{badgeContent:0,label:"Source Code",ariaLabel:"source",icon:i.a.createElement(rt.a,null),onClick:function(){window.open("https://github.com/transmute-industries/did-key","_blank")}}],mt=a(487),dt=a.n(mt),ft=function(e){var t=e.tmui,a=e.setTmuiProp,n=e.children;return i.a.useEffect((function(){Object(R.a)(I.a.mark((function e(){var t,a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.a();case 3:return t=window.origin,a="".concat(t,"/worker.html"),e.next=7,ee.a({url:a});case 7:return n=e.sent,e.next=10,n.credentialManager.hints.set("test",{name:"TestUser",enabledTypes:["VerifiablePresentation","VerifiableCredential","UniversityDegreeCredential"]});case 10:console.log("Wallet registered."),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error in loadOnce:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()})),i.a.createElement(me,null,i.a.createElement(Xe,{rightHandAccountMenu:pt,headerImage:dt.a,drawer:i.a.createElement(ut,{tmui:t,setTmuiProp:a}),content:n}),i.a.createElement(Ie,{tmui:t,setTmuiProp:a}))},yt=a(488),ht=a.n(yt),bt=a(440),gt=(a(213),a(239)),Et=a.n(gt),vt=(a(458),a(459),function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jsonObject,a=e.onChange;return i.a.createElement(Et.a,{mode:"json",theme:"github",style:Object(y.a)({},this.props.style,{width:"100%"}),onChange:function(e){a(e)},readOnly:void 0===a,wrapEnabled:!0,name:"JSONEditorEditor",value:JSON.stringify(t,null,2),editorProps:{$blockScrolling:!0}})}}]),t}(o.Component)),kt=a(152),wt=a.n(kt);var Ot=function(e){var t=[];return e.onShare&&t.push({icon:function(){return i.a.createElement(bt.a,{component:"div",variant:"contained",color:"primary"},"Share")},onClick:function(t,a){var n=Object(y.a)({},a);delete n.tableData,e.onShare(n)}}),i.a.createElement(ht.a,{title:"Options",columns:[{title:"Type",field:"type",render:function(e){return 2===e.type.length?wt.a.startCase(e.type[1]):e.type.map(wt.a.startCase).join(", ")}}],actions:t,data:e.walletRows||[],options:{search:!0,pageSize:3,actionsColumnIndex:-1},detailPanel:function(e){var t=Object(y.a)({},e);return delete t.tableData,i.a.createElement(vt,{jsonObject:t})}})},Ct=window,jt=Ct.Cookies,xt=Ct.credentialHandlerPolyfill;var St=function(e){var t=e.tmui,a=e.setTmuiProp,n=i.a.useState({}),r=Object(X.a)(n,2),o=r[0],l=r[1];return i.a.useEffect((function(){xt.loadOnce().then((function(){var e=function(){var e=jt.get("walletContents");return e||(e=localStorage.getItem("walletContents")),e?JSON.parse(atob(e)):null}();if(l(Object(y.a)({},o,{walletLoaded:!0})),e){var t=[];Object.values(e).forEach((function(e){e.id?t.push(e):e.verifiableCredential&&e.verifiableCredential.forEach((function(e){t.push(e)}))})),l(Object(y.a)({},o,{walletRows:t}))}}))}),[]),i.a.createElement(ft,{tmui:t,setTmuiProp:a},i.a.createElement(Ot,{walletRows:o.walletRows}))},Kt=Object(h.compose)(_.container)((function(e){return i.a.createElement(St,e)})),Tt=a(853),Pt=a(465),Dt=a(852),Wt=a(857),Nt=a(858),It=a(856),Rt=a(855),Lt=a(859),Ft=a(446),Bt=a(156),At=a(240),Mt=a.n(At),Ut=a(314),Ht=a(865),zt=a(866),Jt=a(867),Vt=a(868),qt=a(869),Yt=a(5),_t=a(873),Gt=a(863),$t=a(862);var Qt=Object(Yt.a)((function(e){return{root:{width:"100%",marginBottom:"4px"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular,wordBreak:"break-all"},panel:{backgroundColor:Ce.a[200]}}}))((function(e){var t=e.classes,a=e.panels;return i.a.createElement("div",{className:t.root},a&&a.map((function(e){return i.a.createElement(_t.a,{disabled:e.disabled,key:e.title,className:t.panel},i.a.createElement(Gt.a,{expandIcon:i.a.createElement(Mt.a,null)},i.a.createElement(He.a,{className:t.heading},e.title)),i.a.createElement($t.a,null,e.children))})))})),Xt=a(495),Zt=a.n(Xt),ea=Object(Pe.a)((function(e){return{card:{maxWidth:512},media:{height:0,backgroundSize:"contain",paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function ta(e){switch(e.status){case"empty":return i.a.createElement(Ht.a,null);case"create":return i.a.createElement(zt.a,null);case"locked":return i.a.createElement(Jt.a,null);case"unlocked":default:return i.a.createElement(Vt.a,null)}}function aa(e){switch(e.status){case"empty":case"locked":return Ft.a[500];case"unlocked":default:return Bt.a[500]}}function na(e){var t=e.status,a=e.title,n=e.subheader,r=e.keystore,o=e.doImportKeystore,l=e.doDeleteKeystore,c=e.doCreateWalletKeystore,s=e.onOpenKeystoreLockDialog,u=e.onOpenKeystoreEditDialog,p=ea(),m=i.a.useState(!1),d=Object(X.a)(m,2),f=d[0],y=d[1],h=i.a.useState(null),b=Object(X.a)(h,2),g=b[0],E=b[1],v=function(){E(null)};return i.a.createElement(Tt.a,{className:p.card},i.a.createElement("input",{style:{display:"none"},id:"keystore-file-input",multiple:!0,onChange:function(e){Object.keys(e.target.files).map((function(t){var a=e.target.files[t],n=new FileReader;return n.onload=function(e){o(e.target.result)},n.readAsText(a)}))},type:"file"}),i.a.createElement(Wt.a,{avatar:i.a.createElement(Dt.a,{"aria-label":"recipe",style:{backgroundColor:aa({status:t})}},i.a.createElement(ta,{status:t})),title:a,action:i.a.createElement(i.a.Fragment,null,"empty"===t?i.a.createElement(i.a.Fragment,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(xe.a,{"aria-label":"settings","aria-controls":"simple-menu","aria-haspopup":"true",variant:"contained",onClick:function(e){E(e.currentTarget)}},i.a.createElement($e.a,null)),i.a.createElement(qe.a,{id:"simple-menu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:v},i.a.createElement(Ve.a,{onClick:function(){l(),v()}},"Delete"),"unlocked"===t&&i.a.createElement(Ve.a,{onClick:function(){u(),v()}},"Edit"),i.a.createElement(Ve.a,{onClick:function(){s(),v()}},"locked"===t?"Unlock":"Lock"))))}),"empty"!==t&&i.a.createElement(Nt.a,{className:p.media,image:Zt.a,title:"Keystore"}),i.a.createElement(It.a,null,i.a.createElement(He.a,{variant:"body2",color:"textSecondary",component:"p"},n)),"empty"===t&&i.a.createElement(Rt.a,null,i.a.createElement(bt.a,{"aria-label":"import",onClick:function(){document.getElementById("keystore-file-input").click()},endIcon:i.a.createElement(ta,{status:t})},"Import"),i.a.createElement(bt.a,{onClick:function(){c()},endIcon:i.a.createElement(ta,{status:"create"})},"Create")),"empty"!==t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Rt.a,{disableSpacing:!0},"locked"===t&&i.a.createElement(xe.a,{"aria-label":"Export Keystore",onClick:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("keystore.txt",r.data)}},i.a.createElement(qt.a,null)),"unlocked"===t&&i.a.createElement(xe.a,{className:Object(ye.a)(p.expand,Object(j.a)({},p.expandOpen,f)),onClick:function(){y(!f)},"aria-expanded":f,"aria-label":"show more"},i.a.createElement(Mt.a,null))),i.a.createElement(Lt.a,{in:f,timeout:"auto",unmountOnExit:!0},i.a.createElement(It.a,null,"unlocked"===t&&Object.keys(r.data.keys).map((function(e){var t=r.data.keys[e];return i.a.createElement(Qt,{key:e,panels:[{title:"".concat(t.tags[0]," ").concat(e.substring(0,8),"..."),children:i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(He.a,{variant:"body2"},t.notes),i.a.createElement("br",null),i.a.createElement("div",null,t.tags.map((function(e){return i.a.createElement(Ut.CopyToClipboard,{key:e,text:e,onCopy:function(){alert("Copied ".concat(e," to clipboard"))}},i.a.createElement(Pt.a,{key:e,label:e,variant:"outlined",style:{margin:"4px"}}))}))),i.a.createElement("br",null),i.a.createElement(Ut.CopyToClipboard,{text:t.publicKey,onCopy:function(){alert("Copied public key to clipboard")}},i.a.createElement(bt.a,{style:{marginTop:"16px"},fullWidth:!0,variant:"contained"},"Copy Public Key")))}]})}))))))}var ra=a(439),oa=a(847),ia=a(849),la=a(848),ca=a(860),sa=a(861),ua=function(e){function t(){var e,a;Object(te.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ne.a)(this,(e=Object(re.a)(t)).call.apply(e,[this].concat(r)))).state={password:""},a.handleClose=function(){a.setState({password:""}),a.props.onClose()},a.handleChange=function(e){return function(t){a.setState(Object(j.a)({},e,t.target.value))}},a.handleSubmit=function(e){e.preventDefault(),a.props.doToggleKeystore(a.state.password),a.setState({password:""})},a}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.state.password;return i.a.createElement("div",null,i.a.createElement(oa.a,{open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(sa.a,{id:"form-dialog-title"},"Enter Keystore Password"),i.a.createElement(la.a,null,i.a.createElement(ca.a,null,this.props.message),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(ra.a,{autoFocus:!0,margin:"dense",id:"password",label:"Password",type:"password",value:e,onChange:this.handleChange("password"),fullWidth:!0}))),i.a.createElement(ia.a,null,i.a.createElement(bt.a,{onClick:this.handleClose,color:"primary"},"Cancel"),i.a.createElement(bt.a,{onClick:this.handleSubmit,color:"primary",variant:"contained"},"locked"===this.props.keystoreState?"Unlock":"Lock"," ","Keystore"))))}}]),t}(i.a.Component),pa=function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.onChange;return i.a.createElement(Et.a,{mode:"json",theme:"github",style:{width:"100%"},onChange:a,name:"Keystore Editor",value:t,editorProps:{$blockScrolling:!0}})}}]),t}(i.a.Component),ma=function(e){function t(){var e,a;Object(te.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ne.a)(this,(e=Object(re.a)(t)).call.apply(e,[this].concat(r)))).state={isSetup:!1,keystore:"{}"},a.handleClose=function(){a.setState({isSetup:!1}),a.props.onClose()},a.handleChange=function(e){return function(t){a.setState(Object(j.a)({},e,t.target.value))}},a.handleSubmit=function(e){e.preventDefault(),a.props.doUpdateKeystore(a.state.keystore),a.props.onClose()},a}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"componentDidUpdate",value:function(){if(!this.state.isSetup&&this.props.keystore&&"object"===typeof this.props.keystore.data){var e=JSON.stringify(this.props.keystore.data.keys,null,2);this.state.keystore!==e&&(this.setState({keystore:e}),this.setState({isSetup:!0}))}}},{key:"render",value:function(){var e=this,t=this.state.keystore;return i.a.createElement("div",null,i.a.createElement(oa.a,{fullScreen:!0,open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(sa.a,{id:"form-dialog-title"},"Edit Keystore"),i.a.createElement(la.a,null,i.a.createElement(pa,{value:t,onChange:function(t){e.setState({keystore:t})}})),i.a.createElement(ia.a,null,i.a.createElement(bt.a,{onClick:this.handleClose,color:"primary"},"Cancel"),i.a.createElement(bt.a,{onClick:this.handleSubmit,color:"primary",variant:"contained"},"Save"))))}}]),t}(i.a.Component),da=function(e){function t(){var e,a;Object(te.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(ne.a)(this,(e=Object(re.a)(t)).call.apply(e,[this].concat(r)))).state={isKeystoreLockDialogOpen:!1,isKeystoreEditDialogOpen:!1},a.onOpenKeystoreLockDialog=function(){a.setState({isKeystoreLockDialogOpen:!0})},a.onOpenKeystoreEditDialog=function(){a.setState({isKeystoreEditDialogOpen:!0})},a.doToggleKeystore=function(e){a.setState({isKeystoreLockDialogOpen:!1}),a.props.doToggleKeystore(e)},a}return Object(oe.a)(t,e),Object(ae.a)(t,[{key:"getKeystoreContext",value:function(e){return e&&null!==e.data?"string"===typeof e.data?{status:"locked",title:"You have encrypted keys",subheader:"You will need to unlock your keys with your password before they can be used. You can export them while they are locked, but not after you unlock them.",passwordPrompt:"Enter the password used when the keystore was created or last locked."}:"object"===typeof e.data?{status:"unlocked",title:"You have keys",subheader:"Your keys are ready for use. If you wish to reuse these keys in another application, you must lock this keystore and then export it.",passwordPrompt:"Enter a password to lock this keystore."}:void 0:{status:"empty",title:"You have no keys",subheader:"If you want to use keys generated by another application use import. If you want to generate a keystore for the first time, click create.",passwordPrompt:""}}},{key:"render",value:function(){var e=this,t=this.props,a=t.doImportKeystore,n=t.doDeleteKeystore,r=t.doCreateWalletKeystore,o=t.doUpdateKeystore,l=this.props.keystore.keystore,c=this.getKeystoreContext(l),s=c.status,u=c.title,p=c.subheader,m=c.passwordPrompt,d=this.state,f=d.isKeystoreLockDialogOpen,y=d.isKeystoreEditDialogOpen;return i.a.createElement(i.a.Fragment,null,i.a.createElement(na,{status:s,title:u,subheader:p,keystore:l,doImportKeystore:a,doDeleteKeystore:n,doCreateWalletKeystore:r,onOpenKeystoreLockDialog:this.onOpenKeystoreLockDialog,onOpenKeystoreEditDialog:this.onOpenKeystoreEditDialog}),i.a.createElement(ua,{message:m,open:f,keystoreState:s,doToggleKeystore:this.doToggleKeystore,onClose:function(){e.setState({isKeystoreLockDialogOpen:!1})}}),i.a.createElement(ma,{open:y,keystore:l,doUpdateKeystore:o,onClose:function(){e.setState({isKeystoreEditDialogOpen:!1})}}))}}]),t}(i.a.Component),fa=function(e){return i.a.createElement(ft,e,i.a.createElement(da,e))},ya=Object(h.compose)(_.container,z.container)((function(e){return i.a.createElement(fa,e)})),ha=a(496),ba=a.n(ha);var ga=function(e){var t=e.message;return i.a.createElement("div",{style:{alignItems:"center",display:"flex",flex:1,height:"100%",justifyContent:"center",flexDirection:"column"}},i.a.createElement("img",{alt:"transmute loading...",src:ba.a,style:{filter:"brightness(25%) sepia(1) hue-rotate(-150deg)",marginBottom:"32px"}}),i.a.createElement(He.a,{paragraph:!0},t||"Loading..."))},Ea=a(497),va=a.n(Ea),ka=a(851),wa=a(854),Oa=a(864),Ca=a(500),ja=a.n(Ca),xa=a(498),Sa=a.n(xa),Ka=a(499),Ta=a.n(Ka),Pa=Object(Pe.a)({root:{margin:"auto",marginTop:"5%",maxWidth:545}});function Da(e){var t=e.vc,a=Pa(),n=t.type.slice(1).join("/");return i.a.createElement(Tt.a,{className:a.root},i.a.createElement(wa.a,null,i.a.createElement(It.a,null,i.a.createElement(He.a,{gutterBottom:!0,variant:"h5",component:"h2"},wt.a.startCase(n)),i.a.createElement(ka.a,{container:!0},i.a.createElement(ka.a,{item:!0,xs:12},i.a.createElement(at.a,null,i.a.createElement(Ze.a,null,i.a.createElement(Oa.a,null,i.a.createElement(Dt.a,null,i.a.createElement(Sa.a,null))),i.a.createElement(tt.a,{primary:"Subject",secondary:t.credentialSubject.id})))),i.a.createElement(ka.a,{item:!0,xs:6},i.a.createElement(at.a,null,i.a.createElement(Ze.a,null,i.a.createElement(Oa.a,null,i.a.createElement(Dt.a,null,i.a.createElement(Ta.a,null))),i.a.createElement(tt.a,{primary:"Issuer",secondary:t.issuer})))),i.a.createElement(ka.a,{item:!0,xs:6},i.a.createElement(at.a,null,i.a.createElement(Ze.a,null,i.a.createElement(Oa.a,null,i.a.createElement(Dt.a,null,i.a.createElement(ja.a,null))),i.a.createElement(tt.a,{primary:"Date",secondary:va()(t.issuanceDate).format("LLL")}))))))))}var Wa=window,Na=Wa.Cookies,Ia=Wa.WebCredentialHandler,Ra=Wa.credentialHandlerPolyfill;function La(e){var t=function(){var e=Na.get("walletContents");return e||(e=localStorage.getItem("walletContents")),e?JSON.parse(atob(e)):null}()||{};t[(Array.isArray(e.verifiableCredential)?e.verifiableCredential[0]:e.verifiableCredential).id]=e;var a=btoa(JSON.stringify(t));Na.set("walletContents",a,{path:"",secure:!0,sameSite:"None"}),localStorage.setItem("walletContents",a)}var Fa=function(e){e.tmui,e.setTmuiProp;var t=i.a.useState({}),a=Object(X.a)(t,2),n=a[0],r=a[1];return i.a.useEffect((function(){var e=function(){var e=Object(R.a)(I.a.mark((function e(){var t,a,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia.receiveCredentialEvent();case 2:t=e.sent,console.log("Store Credential Event:",t.type,t),a=t.credential,o=a.data,i=Array.isArray(o.verifiableCredential)?o.verifiableCredential[0]:o.verifiableCredential,r(Object(y.a)({},n,{event:t,credential:a,vc:i}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Ra.loadOnce().then(e)}),[]),n.credential?i.a.createElement(me,null,i.a.createElement("div",{style:{height:"100%",padding:"16px"}},i.a.createElement(He.a,{style:{marginBottom:"16px",marginTop:"8px"}},"Are you sure you wish to store this credential?"),i.a.createElement(Da,{vc:n.vc}),i.a.createElement(bt.a,{style:{position:"absolute",bottom:"10px",left:"10px"},onClick:function(){n.event.respondWith(new Promise((function(e){return e({dataType:"Response",data:"canceled"})})))}},"Cancel"),i.a.createElement(bt.a,{variant:"contained",color:"primary",style:{position:"absolute",bottom:"10px",right:"10px"},onClick:function(){La(n.credential.data),n.event.respondWith(new Promise((function(e){return e({dataType:"Response",data:"result"})})))}},"Confirm"))):i.a.createElement(ga,{message:"Loading credential..."})},Ba=Object(h.compose)(_.container)((function(e){return i.a.createElement(Fa,e)})),Aa=window,Ma=Aa.Cookies,Ua=Aa.WebCredentialHandler,Ha=Aa.credentialHandlerPolyfill;function za(){var e=Ma.get("walletContents");return e||(e=localStorage.getItem("walletContents")),e?JSON.parse(atob(e)):null}var Ja=function(e){e.tmui,e.setTmuiProp;var t=i.a.useState({}),a=Object(X.a)(t,2),n=a[0],r=a[1];return i.a.useEffect((function(){function e(){return(e=Object(R.a)(I.a.mark((function e(){var t,a,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua.receiveCredentialEvent();case 2:if(t=e.sent,console.log("Wallet processing get() event:",t),a=t.credentialRequestOptions.web.VerifiablePresentation,"QueryByExample"!==!(Array.isArray(a.query)?a.query[0]:a.query).type){e.next=8;break}throw new Error("Only QueryByExample requests are supported in demo wallet.");case 8:o=za(),r(Object(y.a)({},n,{walletLoaded:!0})),o&&(i=[],Object.values(o).forEach((function(e){e.id?i.push(e):e.verifiableCredential&&e.verifiableCredential.forEach((function(e){i.push(e)}))})),r(Object(y.a)({},n,{event:t,walletRows:i})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ha.loadOnce().then((function(){return e.apply(this,arguments)}))}),[]),i.a.createElement(me,null,i.a.createElement("div",{style:{height:"100%",padding:"16px"}},i.a.createElement(He.a,{style:{marginBottom:"16px",marginTop:"8px"}},window.origin," Is requesting a credential."),i.a.createElement(Ot,{walletRows:n.walletRows,onShare:function(e){var t={"@context":["https://www.w3.org/2018/credentials/v1","https://www.w3.org/2018/credentials/examples/v1"],type:"VerifiablePresentation",verifiableCredential:e};n.event.respondWith(Promise.resolve({dataType:"VerifiablePresentation",data:t}))}})))},Va=[{path:"/",exact:!0,component:Kt},{path:"/chapi/wallet/store",exact:!0,component:Ba},{path:"/chapi/wallet/get",exact:!0,component:Object(h.compose)(_.container)((function(e){return i.a.createElement(Ja,e)}))},{path:"/keystore",exact:!0,component:ya}],qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={key:"root",whitelist:["keystore"],storage:v.a},a=[w.a,Object(g.a)($)];var n=Object(h.createStore)(Object(b.a)(t,Object(h.combineReducers)(Object(y.a)({},Q,{},e))),Object(k.composeWithDevTools)(Object(h.compose)(h.applyMiddleware.apply(void 0,a),C.a))),r=Object(b.b)(n);return{store:n,persistor:r,history:$}}(),Ya=qa.store,_a=qa.persistor,Ga=qa.history;c.a.render(i.a.createElement(p.a,{store:Ya},i.a.createElement(m.PersistGate,{persistor:_a},i.a.createElement(u.a,{history:Ga},i.a.createElement(s.c,null,Va.map((function(e){var t=e.exact,a=e.path,n=e.component;return i.a.createElement(s.a,{key:a,exact:t,path:a,component:n})})))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");d?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):f(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):f(t,e)}))}}()}},[[540,1,2]]]);
//# sourceMappingURL=main.70d271fb.chunk.js.map